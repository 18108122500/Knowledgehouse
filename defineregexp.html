<!DOCTYPE html>
<!-- saved from url=(0047)https://www.cnblogs.com/onepixel/p/5218904.html -->
<html lang="zh-cn"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1">
<link type="text/css" rel="stylesheet" href="./defineregexp/blog-common.css">
<link id="MainCss" type="text/css" rel="stylesheet" href="./defineregexp/bundle-LessIsMoreRight.css">
<link type="text/css" rel="stylesheet" href="./defineregexp/256889.css">
<link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="./defineregexp/bundle-LessIsMoreRight-mobile.css">
</head>
<body>
<a name="top"></a>
<div id="home">
<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		
<div id="post_detail">
<!--done-->
<div id="topics">
	<div class="post">
		<h1 class="postTitle">
			<a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/onepixel/p/5218904.html">JavaScript 中的正则表达式</a>
		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body" class="blogpost-body"><h4><strong style="line-height: 1.5;">1、正则表达式概述</strong></h4>
<p>ECMAScript 3 开始支持正则表达式，其语法和 Perl 语法很类似，一个完整的正则表达式结构如下：</p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_781622" class="syntaxhighlighter  csharp"><div class="toolbar"><span><a href="https://www.cnblogs.com/onepixel/p/5218904.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="csharp keyword">var</code> <code class="csharp plain">expression = / pattern / flags ;</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>其中，模式（pattern）部分可以是任何简单或复杂的正则表达式，可以包含字符类、限定符、分组、向前查找以及反向引用。</p>
<p>每个正则表达式都可带有一或多个标志（flags），用以标明正则表达式的行为，正则表达式支持下列 3 个标志：</p>
<ul>
<li>g： 表示全局（global）模式，即模式将被应用于所有字符串，而非在发现第一个匹配项时立即停止；</li>
<li>i ： 表示不区分大小写（case-insensitive）模式，即在确定匹配项时忽略模式与字符串的大小写；</li>
<li>m：表示多行（multiline）模式，即在到达一行文本末尾时还会继续查找下一行中是否存在与模式匹配的项。</li>
</ul>
<p>如果多个标志同时使用时，则写成：gmi 。</p>
<p>正则表达式的创建有两种方式： new RegExp(expression) 和 直接字面量。</p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_621674" class="syntaxhighlighter  csharp"><div class="toolbar"><span><a href="https://www.cnblogs.com/onepixel/p/5218904.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="csharp comments">//使用直接字面量创建</code></div><div class="line number2 index1 alt1"><code class="csharp keyword">var</code> <code class="csharp plain">exp1 = /(^\s+)|(\s+$)/g;&nbsp; </code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="csharp comments">//使用RegExp对象创建</code></div><div class="line number5 index4 alt2"><code class="csharp keyword">var</code> <code class="csharp plain">exp2 = </code><code class="csharp keyword">new</code> <code class="csharp plain">RegExp(</code><code class="csharp string">"(^\\s+)|(\\s+$)"</code><code class="csharp plain">,</code><code class="csharp string">"g"</code><code class="csharp plain">);</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>exp1 和 exp2 是两个完全等价的正则表达式，需要注意的是，传递给 RegExp 构造函数的两个参数都是字符串，不能把正则表达式字面量传递给 RegExp 构造函数。</p>
<p>与其他语言中的正则表达式类似，模式中使用的所有<strong>元字符</strong>都必须转义。正则表达式中的元字符包括：</p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_539022" class="syntaxhighlighter  csharp"><div class="toolbar"><span><a href="https://www.cnblogs.com/onepixel/p/5218904.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="csharp plain">( [ { \ ^ $ | ) ? * + .] }</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>这些元字符在正则表达式中都有一或多种特殊用途，因此如果想要匹配字符串中包含的这些字符，就必须对它们进行转义。</p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_762649" class="syntaxhighlighter  csharp"><div class="toolbar"><span><a href="https://www.cnblogs.com/onepixel/p/5218904.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="csharp comments">//匹配 .docx </code></div><div class="line number2 index1 alt1"><code class="csharp keyword">var</code> <code class="csharp plain">exp = /\.docx/gi ;</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>由于 RegExp 构造函数的模式参数是字符串，所以在某些情况下要对字符进行双重转义。<strong>所有元字符都必须双重转义</strong>，那些已经转义过的字符也是如此。&nbsp;</p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_677886" class="syntaxhighlighter  csharp"><div class="toolbar"><span><a href="https://www.cnblogs.com/onepixel/p/5218904.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="csharp comments">// 对 \. 再次转义</code></div><div class="line number2 index1 alt1"><code class="csharp keyword">var</code> <code class="csharp plain">exp = </code><code class="csharp keyword">new</code> <code class="csharp plain">RegExp(</code><code class="csharp string">"\\.docx"</code><code class="csharp plain">,</code><code class="csharp string">"gi"</code><code class="csharp plain">);</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="csharp comments">//匹配 \n </code></div><div class="line number5 index4 alt2"><code class="csharp keyword">var</code> <code class="csharp plain">exp1 = /\\n/g; </code><code class="csharp comments">//对\n中的\转义</code></div><div class="line number6 index5 alt1"><code class="csharp keyword">var</code> <code class="csharp plain">exp2 = </code><code class="csharp keyword">new</code> <code class="csharp plain">RegExp(</code><code class="csharp string">"\\\\n"</code><code class="csharp plain">,</code><code class="csharp string">"g"</code><code class="csharp plain">); </code><code class="csharp comments">// 对 \\n 再次转义</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>&nbsp;</p>
<h4><strong>2、()&nbsp; [] &nbsp;{} 的区别</strong></h4>
<p>() 的作用是提取匹配的字符串。表达式中有几个()就会得到几个相应的匹配字符串。比如&nbsp;(\s+) 表示连续空格的字符串。</p>
<p>[] 是定义匹配的字符范围。比如 [a-zA-Z0-9] 表示字符文本要匹配英文字符和数字。</p>
<p>{} 一般用来表示匹配的长度，比如 \d{3} 表示匹配三个数字，\d{1,3} 表示匹配1~3个数字，\d{3,} 表示匹配3个以上数字。</p>
<p>&nbsp;</p>
<h4><strong>3、^ 与 $</strong></h4>
<p>^ 匹配一个字符串的开头，比如 (^a) 就是匹配以字母a开头的字符串</p>
<p>$ 匹配一个字符串的结尾,比如 (b$) 就是匹配以字母b结尾的字符串</p>
<p>^ 还有另个一个作用就是取反，比如[^xyz] 表示匹配的字符串不包含xyz</p>
<p><strong>注意问题：</strong></p>
<ul>
<li><span style="color: #000000;">如果 ^ 出现在[ ] 中一般表示取反，而出现在其他地方则是匹配字符串的开头。</span></li>
<li><span style="color: #000000;">^ 和 $ 配合可以有效匹配完整字符串: /d+/.test('4xpt') -&gt; true，而 /^\d+$/.test('4xpt')-&gt;false</span></li>
</ul>
<p>&nbsp;</p>
<h4><strong><span style="color: #000000;">4、\d &nbsp;\s &nbsp;\w &nbsp;.</span></strong></h4>
<p><span>\d 匹配一个非负整数， 等价于 [0-9]</span></p>
<p><span style="color: #000000;">\s 匹配一个空白字符</span></p>
<p><span style="color: #000000;">\w 匹配一个英文字母或数字，等价于[0-9a-zA-Z]</span></p>
<p><span style="color: #000000;">. &nbsp; 匹配除换行符以外的任意字符，等价于[^\n]</span></p>
<p>&nbsp;</p>
<h4><strong><span style="color: #000000;">5、* + ?</span></strong></h4>
<p><span>* 表示匹配前面元素0次或多次，比如 (\s*) 就是匹配0个或多个空格</span></p>
<p><span style="color: #000000;">+&nbsp;表示匹配前面元素1次或多次，比如 (\d+) 就是匹配由至少1个整数组成的字符串</span></p>
<p>? 表示匹配前面元素0次或1次，相当于{0,1} ，比如(\w?) 就是匹配最多由1个字母或数字组成的字符串&nbsp;</p>
<p>&nbsp;</p>
<h4><strong>6、$1 与 \1&nbsp;</strong></h4>
<p>$1-$9 存放着正则表达式中最近的9个正则表达式的提取的结果，这些结果按照子匹配的出现顺序依次排列。基本语法是：RegExp.$n ，这些属性是静态的，除了replace中的第二个参数可以省略 RegExp 之外，其他地方使用都要加上 RegExp 。</p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_952378" class="syntaxhighlighter  csharp"><div class="toolbar"><span><a href="https://www.cnblogs.com/onepixel/p/5218904.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="csharp comments">//使用RegExp访问</code></div><div class="line number2 index1 alt1"><code class="csharp plain">/(\d+)-(\d+)-(\d+)/.test(</code><code class="csharp string">"2016-03-26"</code><code class="csharp plain">) </code></div><div class="line number3 index2 alt2"><code class="csharp spaces">&nbsp;</code>&nbsp;</div><div class="line number4 index3 alt1"><code class="csharp plain">RegExp.$1&nbsp; </code><code class="csharp comments">// 2016</code></div><div class="line number5 index4 alt2"><code class="csharp plain">RegExp.$2&nbsp; </code><code class="csharp comments">// 03</code></div><div class="line number6 index5 alt1"><code class="csharp plain">RegExp.$3&nbsp; </code><code class="csharp comments">// 26</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="csharp comments">//在replace中使用</code></div><div class="line number9 index8 alt2"><code class="csharp string">"2016-03-26"</code><code class="csharp plain">.replace(/(\d+)-(\d+)-(\d+)/,</code><code class="csharp string">"$1年$2月$3日"</code><code class="csharp plain">)&nbsp; </code></div><div class="line number10 index9 alt1"><code class="csharp comments">// 2016年03月26日</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>\1 表示后向引用，是指在正则表达式中，从左往右数，第1个()中的内容，以此类推，\2表示第2个()，\0表示整个表达式。</p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_313003" class="syntaxhighlighter  csharp"><div class="toolbar"><span><a href="https://www.cnblogs.com/onepixel/p/5218904.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="csharp comments">//匹配日期格式，表达式中的\1代表重复(\-|\/|.)</code></div><div class="line number2 index1 alt1"><code class="csharp keyword">var</code> <code class="csharp plain">rgx = /\d{4}(\-|\/|.)\d{1,2}\1\d{1,2}"/</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="csharp plain">rgx.test(</code><code class="csharp string">"2016-03-26"</code><code class="csharp plain">) </code><code class="csharp comments">//true&nbsp; </code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="csharp plain">rgx.test(</code><code class="csharp string">"2016-03.26"</code><code class="csharp plain">) </code><code class="csharp comments">//false</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>&nbsp;<span style="color: #000000;"><strong>两者的区别是：\n只能用在表达式中，而$n只能用在表达式之外的地方。&nbsp;</strong></span></p>
<p>&nbsp;</p>
<h4><strong>7、test 与 match</strong></h4>
<p>前面的大都是JS正则表达式的语法，而test则是用来检测字符串是否匹配某一个正则表达式，如果匹配就会返回true,反之则返回false</p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_457622" class="syntaxhighlighter  csharp"><div class="toolbar"><span><a href="https://www.cnblogs.com/onepixel/p/5218904.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="csharp plain">/\d+/.test(</code><code class="csharp string">"123"</code><code class="csharp plain">) ; </code><code class="csharp comments">//true</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="csharp plain">/\d+/.test(</code><code class="csharp string">"abc"</code><code class="csharp plain">) ; </code><code class="csharp comments">//false</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>match是获取正则匹配到的结果，以数组的形式返回</p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_998185" class="syntaxhighlighter  csharp"><div class="toolbar"><span><a href="https://www.cnblogs.com/onepixel/p/5218904.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="csharp string">"186a619b28"</code><code class="csharp plain">.match(/\d+/g); </code><code class="csharp comments">// ["186","619","28"]</code></div></div></td></tr></tbody></table></div></div>
</div>
<h4>&nbsp;</h4>
<h4><strong>8、replace</strong></h4>
<p>replace 本身是JavaScript字符串对象的一个方法，它允许接收两个参数：</p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_182534" class="syntaxhighlighter  csharp"><div class="toolbar"><span><a href="https://www.cnblogs.com/onepixel/p/5218904.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="csharp plain">replace([RegExp|String],[String|Function])</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>第1个参数可以是一个普通的字符串或是一个正则表达式</p>
<p>第2个参数可以是一个普通的字符串或是一个回调函数</p>
<p>如果第1个参数是 RegExp，JS会先提取RegExp匹配出的结果，然后用第2个参数逐一替换匹配出的结果</p>
<p>如果第2个参数是回调函数，每匹配到一个结果就回调一次，每次回调都会传递以下参数：</p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_983248" class="syntaxhighlighter  csharp"><div class="toolbar"><span><a href="https://www.cnblogs.com/onepixel/p/5218904.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="csharp plain">result: 本次匹配到的结果</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="csharp plain">$1,...$9: 正则表达式中有几个()，就会传递几个参数，$1~$9分别代表本次匹配中每个()提取的结果，最多9个</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="csharp plain">offset:记录本次匹配的开始位置</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="csharp plain">source:接受匹配的原始字符串</code></div></div></td></tr></tbody></table></div></div>
</div>
<h4>&nbsp;</h4>
<h4>9、经典案例</h4>
<p><span style="color: #000000;">【1】实现字符串的 trim 函数，去除字符串两边的空格。</span></p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_718671" class="syntaxhighlighter  csharp"><div class="toolbar"><span><a href="https://www.cnblogs.com/onepixel/p/5218904.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="csharp plain">String.prototype.trim = function(){</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp comments">//方式一：将匹配到的每一个结果都用""替换</code></div><div class="line number4 index3 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">return</code> <code class="csharp keyword">this</code><code class="csharp plain">.replace(/(^\s+)|(\s+$)/g,function(){</code></div><div class="line number5 index4 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">return</code> <code class="csharp string">""</code><code class="csharp plain">;</code></div><div class="line number6 index5 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp plain">});</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp comments">//方式二：和方式一的原理相同</code></div><div class="line number9 index8 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">return</code> <code class="csharp keyword">this</code><code class="csharp plain">.replace(/(^\s+)|(\s+$)/g,</code><code class="csharp string">''</code><code class="csharp plain">);</code></div><div class="line number10 index9 alt1"><code class="csharp plain">};</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>^\s+ 表示以空格开头的连续空白字符，\s+$ 表示以空格结尾的连续空白字符，加上() 就是将匹配到的结果提取出来，由于是 | 的关系，因此这个表达式最多会match到两个结果集，然后执行两次替换：</p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_819876" class="syntaxhighlighter  csharp"><div class="toolbar"><span><a href="https://www.cnblogs.com/onepixel/p/5218904.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="csharp plain">String.prototype.trim = function(){</code></div><div class="line number2 index1 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp comments">/**</code></div><div class="line number3 index2 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp comments">* @param rs：匹配结果</code></div><div class="line number4 index3 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp comments">* @param $1:第1个()提取结果</code></div><div class="line number5 index4 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp comments">* @param $2:第2个()提取结果</code></div><div class="line number6 index5 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp comments">* @param offset:匹配开始位置</code></div><div class="line number7 index6 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp comments">* @param source：原始字符串</code></div><div class="line number8 index7 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp comments">*/</code></div><div class="line number9 index8 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">this</code><code class="csharp plain">.replace(/(^\s+)|(\s+$)/g,function(rs,$1,$2,offset,source){</code></div><div class="line number10 index9 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp comments">//arguments中的每个元素对应一个参数</code></div><div class="line number11 index10 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp plain">console.log(arguments);</code></div><div class="line number12 index11 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp plain">});</code></div><div class="line number13 index12 alt2"><code class="csharp plain">};</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="csharp string">" abcd "</code><code class="csharp plain">.trim();</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="csharp plain">输出结果：</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="csharp plain">[</code><code class="csharp string">" "</code><code class="csharp plain">, </code><code class="csharp string">" "</code><code class="csharp plain">, undefined, 0, </code><code class="csharp string">" abcd "</code><code class="csharp plain">] </code><code class="csharp comments">//第1次匹配结果</code></div><div class="line number20 index19 alt1"><code class="csharp plain">[</code><code class="csharp string">" "</code><code class="csharp plain">, undefined, </code><code class="csharp string">" "</code><code class="csharp plain">, 5, </code><code class="csharp string">" abcd "</code><code class="csharp plain">] </code><code class="csharp comments">//第2次匹配结果</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>&nbsp;</p>
<p><span style="color: #000000;">【2】提取浏览器 url 中的参数名和参数值，生成一个key/value 的对象。&nbsp;</span></p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_892426" class="syntaxhighlighter  csharp"><div class="toolbar"><span><a href="https://www.cnblogs.com/onepixel/p/5218904.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="csharp plain">function getUrlParamObj(){</code></div><div class="line number2 index1 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">var</code> <code class="csharp plain">obj = {};</code></div><div class="line number3 index2 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp comments">//获取url的参数部分</code></div><div class="line number4 index3 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">var</code> <code class="csharp keyword">params</code> <code class="csharp plain">= window.location.search.substr(1);</code></div><div class="line number5 index4 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp comments">//[^&amp;=]+ 表示不含&amp;或=的连续字符，加上()就是提取对应字符串</code></div><div class="line number6 index5 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">params</code><code class="csharp plain">.replace(/([^&amp;=]+)=([^&amp;=]*)/gi,function(rs,$1,$2){</code></div><div class="line number7 index6 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp plain">obj[$1] =&nbsp; decodeURIComponent($2);</code></div><div class="line number8 index7 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp plain">});</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">return</code> <code class="csharp plain">obj;</code></div><div class="line number11 index10 alt2"><code class="csharp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>/([^&amp;=]+)=([^&amp;=]*)/gi 每次匹配到的都是一个完整key/value,形如 xxxx=xxx, 每当匹配到一个这样的结果时就执行回调，并传递匹配到的 key 和 value，对应到$1和$2 。</p>
<p>&nbsp;</p>
<p>【3】扩展 typeof，包含引用类型的具体类型。</p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_552115" class="syntaxhighlighter  csharp"><div class="toolbar"><span><a href="https://www.cnblogs.com/onepixel/p/5218904.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="csharp plain">function getDataType(obj){</code></div><div class="line number2 index1 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">let</code> <code class="csharp plain">rst = Object.prototype.toString.call(obj);</code></div><div class="line number3 index2 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp plain">rst = rst.replace(/\[</code><code class="csharp keyword">object</code><code class="csharp plain">\s(\w+)\]/,</code><code class="csharp string">'$1'</code><code class="csharp plain">); </code><code class="csharp comments">//[object Xxx]</code></div><div class="line number4 index3 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">return</code> <code class="csharp plain">rst.toLowerCase()</code></div><div class="line number5 index4 alt2"><code class="csharp plain">}</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="csharp plain">getDataType(1); </code><code class="csharp comments">//number</code></div><div class="line number8 index7 alt1"><code class="csharp plain">getDataType(</code><code class="csharp string">'a'</code><code class="csharp plain">); </code><code class="csharp comments">//string</code></div><div class="line number9 index8 alt2"><code class="csharp plain">getDataType(</code><code class="csharp keyword">null</code><code class="csharp plain">); </code><code class="csharp comments">//null</code></div><div class="line number10 index9 alt1"><code class="csharp plain">getDataType([]); </code><code class="csharp comments">//array</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>$1 是正则表达式中第一个() 中匹配的内容。需要注意的是，replace的第二个参数只能是字符串或函数，因此，这里的 $1 需要放在引号中。</p>
<p>&nbsp;</p>
<p><span style="color: #000000;">【4】在字符串指定位置插入新字符串。</span></p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_456688" class="syntaxhighlighter  csharp"><div class="toolbar"><span><a href="https://www.cnblogs.com/onepixel/p/5218904.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="csharp plain">String.prototype.insetAt = function(str,offset){</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp plain">offset = offset + 1; </code></div><div class="line number4 index3 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp comments">//使用RegExp()构造函数创建正则表达式</code></div><div class="line number5 index4 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">var</code> <code class="csharp plain">regx = </code><code class="csharp keyword">new</code> <code class="csharp plain">RegExp(</code><code class="csharp string">"(^.{"</code><code class="csharp plain">+offset+</code><code class="csharp string">"})"</code><code class="csharp plain">);</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">return</code> <code class="csharp keyword">this</code><code class="csharp plain">.replace(regx,</code><code class="csharp string">"$1"</code><code class="csharp plain">+str);</code></div><div class="line number8 index7 alt1"><code class="csharp plain">};</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="csharp string">"abcd"</code><code class="csharp plain">.insetAt(</code><code class="csharp string">'xyz'</code><code class="csharp plain">,2); </code><code class="csharp comments">//在c字符后插入xyz</code></div><div class="line number11 index10 alt2"><code class="csharp plain">&gt;&gt; </code><code class="csharp string">"abcxyzd"</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>当offset=2时，正则表达式为：(^.{3}) &nbsp;.表示除\n之外的任意字符，{3} 表示匹配前三个连续字符，加()就会将匹配到的结果提取出来，然后通过replace将匹配到的结果替换为新的字符串，形如：结果=结果+str</p>
<p>&nbsp;</p>
<p><span style="color: #000000;">【5】将手机号12988886666转化成129****6666 。</span></p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_890981" class="syntaxhighlighter  csharp"><div class="toolbar"><span><a href="https://www.cnblogs.com/onepixel/p/5218904.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="csharp plain">function telFormat(tel){</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp plain">tel = String(tel);</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp comments">//方式一</code></div><div class="line number6 index5 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">return</code> <code class="csharp plain">tel.replace(/(\d{3})(\d{4})(\d{4})/,function (rs,$1,$2,$3){</code></div><div class="line number7 index6 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">return</code> <code class="csharp plain">$1+</code><code class="csharp string">"****"</code><code class="csharp plain">+$3</code></div><div class="line number8 index7 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp plain">});</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp comments">//方式二</code></div><div class="line number11 index10 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">return</code> <code class="csharp plain">tel.replace(/(\d{3})(\d{4})(\d{4})/,</code><code class="csharp string">"$1****$3"</code><code class="csharp plain">);</code></div><div class="line number12 index11 alt1"><code class="csharp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>(\d{3}\d{4}\d{4}) 可以匹配完整的手机号，并分别提取前 3 位、4-7 位和 8-11位，"$1****$3" 是将第 2 个匹配结果用****代替并组成新的字符串，然后替换完整的手机号。</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000;"><span style="color: #000000;">【6】实现HTML编码，将&lt; / &gt; " &amp; ` 等字符进行转义，避免XSS攻击 。</span></span></p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_485216" class="syntaxhighlighter  csharp"><div class="toolbar"><span><a href="https://www.cnblogs.com/onepixel/p/5218904.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="csharp plain">function htmlEncode(str) {</code></div><div class="line number2 index1 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp comments">//匹配&lt; / &gt; " &amp; `</code></div><div class="line number3 index2 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">return</code> <code class="csharp plain">str.replace(/[&lt;&gt;"&amp;\/`]/g, function(rs) {</code></div><div class="line number4 index3 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">switch</code> <code class="csharp plain">(rs) {</code></div><div class="line number5 index4 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">case</code> <code class="csharp string">"&lt;"</code><code class="csharp plain">:</code></div><div class="line number6 index5 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">return</code> <code class="csharp string">"&lt;"</code><code class="csharp plain">;</code></div><div class="line number7 index6 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">case</code> <code class="csharp string">"&gt;"</code><code class="csharp plain">:</code></div><div class="line number8 index7 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">return</code> <code class="csharp string">"&gt;"</code><code class="csharp plain">;</code></div><div class="line number9 index8 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">case</code> <code class="csharp string">"&amp;"</code><code class="csharp plain">:</code></div><div class="line number10 index9 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">return</code> <code class="csharp string">"&amp;"</code><code class="csharp plain">;</code></div><div class="line number11 index10 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">case</code> <code class="csharp string">"\""</code><code class="csharp plain">:</code></div><div class="line number12 index11 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">return</code> <code class="csharp string">""</code><code class="csharp plain">";</code></div><div class="line number13 index12 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">case</code> <code class="csharp string">"/"</code><code class="csharp plain">:&nbsp; </code></div><div class="line number14 index13 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">return</code> <code class="csharp string">"/"</code></div><div class="line number15 index14 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">case</code> <code class="csharp string">"`"</code><code class="csharp plain">:</code></div><div class="line number16 index15 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp keyword">return</code> <code class="csharp string">"'"</code></div><div class="line number17 index16 alt2"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp plain">}</code></div><div class="line number18 index17 alt1"><code class="csharp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="csharp plain">});</code></div><div class="line number19 index18 alt2"><code class="csharp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>&nbsp;</p>
</div>


	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->

	<div id="sideBar">
		<div id="sideBarMain">
			
<!--done-->
</div><!--end: home 自定义的最大容器 -->


</body></html>